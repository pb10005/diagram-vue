(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["diagram"]=e():t["diagram"]=e()})("undefined"!==typeof self?self:this,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"0a01":function(t,e,n){"use strict";var i=n("151d"),o=n.n(i);o.a},"0a49":function(t,e,n){var i=n("9b43"),o=n("626a"),r=n("4bf8"),c=n("9def"),s=n("cd1c");t.exports=function(t,e){var n=1==t,a=2==t,u=3==t,l=4==t,d=6==t,f=5==t||d,p=e||s;return function(e,s,h){for(var v,m,g=r(e),b=o(g),y=i(s,h,3),x=c(b.length),k=0,_=n?p(e,x):a?p(e,0):void 0;x>k;k++)if((f||k in b)&&(v=b[k],m=y(v,k,g),t))if(n)_[k]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return k;case 2:_.push(v)}else if(l)return!1;return d?-1:u||l?l:_}}},"0bfb":function(t,e,n){"use strict";var i=n("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,n){var i=n("ce10"),o=n("e11e");t.exports=Object.keys||function(t){return i(t,o)}},1169:function(t,e,n){var i=n("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"11e9":function(t,e,n){var i=n("52a7"),o=n("4630"),r=n("6821"),c=n("6a99"),s=n("69a8"),a=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=r(t),e=c(e,!0),a)try{return u(t,e)}catch(n){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},1495:function(t,e,n){var i=n("86cc"),o=n("cb7c"),r=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){o(t);var n,c=r(e),s=c.length,a=0;while(s>a)i.f(t,n=c[a++],e[n]);return t}},"151d":function(t,e,n){},"1c80":function(t,e,n){"use strict";var i=n("6e96"),o=n.n(i);o.a},"230e":function(t,e,n){var i=n("d3f4"),o=n("7726").document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},"2aba":function(t,e,n){var i=n("7726"),o=n("32e9"),r=n("69a8"),c=n("ca5a")("src"),s="toString",a=Function[s],u=(""+a).split(s);n("8378").inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,s){var a="function"==typeof n;a&&(r(n,"name")||o(n,"name",e)),t[e]!==n&&(a&&(r(n,c)||o(n,c,t[e]?""+t[e]:u.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[c]||a.call(this)})},"2aeb":function(t,e,n){var i=n("cb7c"),o=n("1495"),r=n("e11e"),c=n("613b")("IE_PROTO"),s=function(){},a="prototype",u=function(){var t,e=n("230e")("iframe"),i=r.length,o="<",c=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(o+"script"+c+"document.F=Object"+o+"/script"+c),t.close(),u=t.F;while(i--)delete u[a][r[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[a]=i(t),n=new s,s[a]=null,n[c]=t):n=u(),void 0===e?n:o(n,e)}},"2b4c":function(t,e,n){var i=n("5537")("wks"),o=n("ca5a"),r=n("7726").Symbol,c="function"==typeof r,s=t.exports=function(t){return i[t]||(i[t]=c&&r[t]||(c?r:o)("Symbol."+t))};s.store=i},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"32e9":function(t,e,n){var i=n("86cc"),o=n("4630");t.exports=n("9e1e")?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},"35b1":function(t,e,n){},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"386b":function(t,e,n){var i=n("5ca1"),o=n("79e5"),r=n("be13"),c=/"/g,s=function(t,e,n,i){var o=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(i).replace(c,"&quot;")+'"'),s+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),i(i.P+i.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},4588:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},4927:function(t,e,n){},"4bf8":function(t,e,n){var i=n("be13");t.exports=function(t){return Object(i(t))}},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"536c":function(t,e,n){"use strict";var i=n("d0df"),o=n.n(i);o.a},5537:function(t,e,n){var i=n("8378"),o=n("7726"),r="__core-js_shared__",c=o[r]||(o[r]={});(t.exports=function(t,e){return c[t]||(c[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n("2d00")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(t,e,n){var i=n("7726"),o=n("8378"),r=n("32e9"),c=n("2aba"),s=n("9b43"),a="prototype",u=function(t,e,n){var l,d,f,p,h=t&u.F,v=t&u.G,m=t&u.S,g=t&u.P,b=t&u.B,y=v?i:m?i[e]||(i[e]={}):(i[e]||{})[a],x=v?o:o[e]||(o[e]={}),k=x[a]||(x[a]={});for(l in v&&(n=e),n)d=!h&&y&&void 0!==y[l],f=(d?y:n)[l],p=b&&d?s(f,i):g&&"function"==typeof f?s(Function.call,f):f,y&&c(y,l,f,t&u.U),x[l]!=f&&r(x,l,p),g&&k[l]!=f&&(k[l]=f)};i.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},"5dbc":function(t,e,n){var i=n("d3f4"),o=n("8b97").set;t.exports=function(t,e,n){var r,c=e.constructor;return c!==n&&"function"==typeof c&&(r=c.prototype)!==n.prototype&&i(r)&&o&&o(t,r),t}},6046:function(t,e,n){},"613b":function(t,e,n){var i=n("5537")("keys"),o=n("ca5a");t.exports=function(t){return i[t]||(i[t]=o(t))}},"626a":function(t,e,n){var i=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},6821:function(t,e,n){var i=n("626a"),o=n("be13");t.exports=function(t){return i(o(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"6a99":function(t,e,n){var i=n("d3f4");t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},"6b54":function(t,e,n){"use strict";n("3846");var i=n("cb7c"),o=n("0bfb"),r=n("9e1e"),c="toString",s=/./[c],a=function(t){n("2aba")(RegExp.prototype,c,t,!0)};n("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?a(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?o.call(t):void 0)}):s.name!=c&&a(function(){return s.call(this)})},"6e96":function(t,e,n){},7514:function(t,e,n){"use strict";var i=n("5ca1"),o=n("0a49")(5),r="find",c=!0;r in[]&&Array(1)[r](function(){c=!1}),i(i.P+i.F*c,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(r)},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var i=n("4588"),o=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?o(t+e,0):r(t,e)}},7844:function(t,e,n){"use strict";var i=n("4927"),o=n.n(i);o.a},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7f7f":function(t,e,n){var i=n("86cc").f,o=Function.prototype,r=/^\s*function ([^ (]*)/,c="name";c in o||n("9e1e")&&i(o,c,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},8378:function(t,e){var n=t.exports={version:"2.6.1"};"number"==typeof __e&&(__e=n)},"86cc":function(t,e,n){var i=n("cb7c"),o=n("c69a"),r=n("6a99"),c=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return c(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"8b97":function(t,e,n){var i=n("d3f4"),o=n("cb7c"),r=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},"8d7e":function(t,e,n){"use strict";var i=n("35b1"),o=n.n(i);o.a},9093:function(t,e,n){var i=n("ce10"),o=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},"9b43":function(t,e,n){var i=n("d8e8");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,n){var i=n("2b4c")("unscopables"),o=Array.prototype;void 0==o[i]&&n("32e9")(o,i,{}),t.exports=function(t){o[i][t]=!0}},"9def":function(t,e,n){var i=n("4588"),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},aa77:function(t,e,n){var i=n("5ca1"),o=n("be13"),r=n("79e5"),c=n("fdef"),s="["+c+"]",a="​",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),d=function(t,e,n){var o={},s=r(function(){return!!c[t]()||a[t]()!=a}),u=o[t]=s?e(f):c[t];n&&(o[n]=u),i(i.P+i.F*s,"String",o)},f=d.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=d},b54a:function(t,e,n){"use strict";n("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,n){var i=n("6821"),o=n("9def"),r=n("77f1");t.exports=function(t){return function(e,n,c){var s,a=i(e),u=o(a.length),l=r(c,u);if(t&&n!=n){while(u>l)if(s=a[l++],s!=s)return!0}else for(;u>l;l++)if((t||l in a)&&a[l]===n)return t||l||0;return!t&&-1}}},c5f6:function(t,e,n){"use strict";var i=n("7726"),o=n("69a8"),r=n("2d95"),c=n("5dbc"),s=n("6a99"),a=n("79e5"),u=n("9093").f,l=n("11e9").f,d=n("86cc").f,f=n("aa77").trim,p="Number",h=i[p],v=h,m=h.prototype,g=r(n("2aeb")(m))==p,b="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():f(e,3);var n,i,o,r=e.charCodeAt(0);if(43===r||45===r){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(var c,a=e.slice(2),u=0,l=a.length;u<l;u++)if(c=a.charCodeAt(u),c<48||c>o)return NaN;return parseInt(a,i)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof h&&(g?a(function(){m.valueOf.call(n)}):r(n)!=p)?c(new v(y(e)),n,h):y(e)};for(var x,k=n("9e1e")?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;k.length>_;_++)o(v,x=k[_])&&!o(h,x)&&d(h,x,l(v,x));h.prototype=m,m.constructor=h,n("2aba")(i,p,h)}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},ca5a:function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},cb7c:function(t,e,n){var i=n("d3f4");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},cd1c:function(t,e,n){var i=n("e853");t.exports=function(t,e){return new(i(t))(e)}},ce10:function(t,e,n){var i=n("69a8"),o=n("6821"),r=n("c366")(!1),c=n("613b")("IE_PROTO");t.exports=function(t,e){var n,s=o(t),a=0,u=[];for(n in s)n!=c&&i(s,n)&&u.push(n);while(e.length>a)i(s,n=e[a++])&&(~r(u,n)||u.push(n));return u}},d0df:function(t,e,n){},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},daa4:function(t,e,n){"use strict";var i=n("6046"),o=n.n(i);o.a},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e853:function(t,e,n){var i=n("d3f4"),o=n("1169"),r=n("2b4c")("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}},fab2:function(t,e,n){var i=n("7726").document;t.exports=i&&i.documentElement},fb15:function(t,e,n){"use strict";var i;(n.r(e),"undefined"!==typeof window)&&((i=window.document.currentScript)&&(i=i.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=i[1]));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scrollXY"},[n("div",[n("svg",{attrs:{width:t.width*t.scale,height:t.height*t.scale,xmlns:"http://www.w3.org/2000/svg"}},[n("g",{attrs:{transform:t.scaleStr}},[n("rect",{attrs:{x:"0",y:"0",width:t.width,height:t.height,fill:t.background},on:{click:t.reset}}),t._l(t.linkList,function(e){return n("Link",{key:e.id,attrs:{width:t.width,height:t.height,link:e,selected:e.id===t.selectedLink,source:t.findNode(e.source),destination:t.findNode(e.destination),editable:t.editable,labels:t.labels,scale:t.scale},on:{editLink:t.editLink,select:t.selectLink,updateLocation:t.updateLinkLocation,remove:t.removeLink}})}),t._l(t.nodeList,function(e){return n("Node",{key:e.id,attrs:{width:t.width,height:t.height,node:e,selected:e.id===t.selectedNode,createLinkMode:t.createLinkMode,editable:t.editable,labels:t.labels,scale:t.scale},on:{editNode:t.editNode,select:t.selectNode,updateLocation:t.updateNodeLocation,toggleSelect:t.toggleSrcSelect,commitDest:t.commitDest,remove:t.removeNode}})})],2)])])])},r=[],c=(n("7514"),n("7f7f"),n("6b54"),n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",[t.selected?n("g",[n("text",{staticClass:"button",attrs:{x:t.x+5,y:t.y+t.height+22,fill:"#00b894"},on:{click:t.editCandidate}},[t._v("\n      "+t._s(t.labels.edit||"Edit")+"\n    ")])]):t._e(),t.selected?n("g",[n("text",{staticClass:"button",attrs:{x:t.x+5,y:t.y-10,fill:"#00b894",stroke:"none"},on:{click:t.toggleSelect}},[t._v("\n      "+t._s(t.labels.link||"Link")+"\n    ")]),n("text",{staticClass:"button",attrs:{x:t.x+65,y:t.y+t.height+22,fill:"#ff7675"},on:{click:t.remove}},[t._v("\n      "+t._s(t.labels.remove||"Remove")+"\n    ")])]):t._e(),t.createLinkMode&&!t.selected?n("g",[n("text",{staticClass:"button",attrs:{x:t.x+5,y:t.y-10,fill:"#ff7675"},on:{click:t.commitDest}},[t._v("\n      "+t._s(t.labels.select||"Select")+"\n    ")])]):t._e(),n("svg",{staticClass:"shadow",attrs:{x:t.x,y:t.y,width:t.width,height:t.height}},["ellipse"===t.node.shape?n("ellipse",{staticClass:"grab",attrs:{cx:"50%",cy:"50%",width:"100%",height:"100%",rx:t.width/2,ry:t.height/2,fill:t.content.color||"#ecf0f1"},on:{touchstart:t.mousedown,mousedown:t.mousedown,mousemove:t.mousemove,touchmove:t.mousemove,mouseup:t.mouseup,touchend:t.mouseup}}):n("rect",{staticClass:"grab",attrs:{x:"0",y:"0",width:"100%",height:"100%",rx:"5",ry:"3",fill:t.content.color||"#ecf0f1"},on:{touchstart:t.mousedown,mousedown:t.mousedown,mousemove:t.mousemove,touchmove:t.mousemove,mouseup:t.mouseup,touchend:t.mouseup}}),n("a",{attrs:{target:"_blank",href:t.content.url}},[n("text",{attrs:{x:"50%",y:"50%",fill:"#34495e","font-family":"Meiryo UI, sans-serif","font-size":"20","text-anchor":"middle"}},[t._v("\n        "+t._s(t.content.text)+"\n      ")])])])])}),s=[];function a(t){if(Array.isArray(t))return t}function u(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0)if(n.push(c.value),e&&n.length===e)break}catch(a){o=!0,r=a}finally{try{i||null==s["return"]||s["return"]()}finally{if(o)throw r}}return n}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(t,e){return a(t)||u(t,e)||l()}var f={methods:{getLocation:function(t){var e=0,n=0;return t.touches?(e=t.touches[0].pageX,n=t.touches[0].pageY):(e=t.pageX,n=t.pageY),[e,n]}}},p={mixins:[f],props:{node:{width:Number,height:Number,id:String,point:{type:Object,default:{x:0,y:0}},content:{text:String,url:String,color:String},shape:{type:String,default:"rectangle"}},editable:Boolean,createLinkMode:Boolean,selected:Boolean,labels:Object,scale:String},data:function(){return{startPosition:null,cursorOffset:{x:0,y:0},id:this.node.id,x:this.node.point.x,y:this.node.point.y,width:this.node.width,height:this.node.height,content:this.node.content}},methods:{toggleSelect:function(){this.$emit("toggleSelect")},commitDest:function(){this.$emit("commitDest",this.id)},remove:function(){this.$emit("remove",this.id)},mousedown:function(t){if(this.editable){this.$emit("select",this.id);var e=this.getLocation(t),n=d(e,2),i=n[0],o=n[1];this.cursorOffset.x=i,this.cursorOffset.y=o,this.startPosition={x:this.x,y:this.y},document.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup)}},mousemove:function(t){if(this.startPosition){t.preventDefault();var e=this.getLocation(t),n=d(e,2),i=n[0],o=n[1];this.x=this.startPosition.x+(i-this.cursorOffset.x)/parseFloat(this.scale),this.y=this.startPosition.y+(o-this.cursorOffset.y)/parseFloat(this.scale),this.$emit("updateLocation",{id:this.id,x:this.x,y:this.y})}},mouseup:function(){this.startPosition=null,document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup)},editCandidate:function(){this.$emit("editNode",{id:this.id,shape:this.node.shape,content:this.content})}}},h=p;n("7844");function v(t,e,n,i,o,r,c,s){var a,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),c?(a=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},u._ssrRegister=a):o&&(a=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),a)if(u.functional){u._injectStyles=a;var l=u.render;u.render=function(t,e){return a.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,a):[a]}return{exports:t,options:u}}var m=v(h,c,s,!1,null,"d80123fe",null);m.options.__file="Node.vue";var g=m.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",[n("path",{attrs:{d:"M"+(t.source.point.x+t.source.width/2)+" "+(t.source.point.y+t.source.height/2)+" Q "+t.point.x+" "+t.point.y+" "+(t.destination.point.x+t.destination.width/2)+" "+(t.destination.point.y+t.destination.height/2),stroke:t.link.color||"#ffeaa7","stroke-width":"3",fill:"none"}}),t.editable?n("g",[n("line",{attrs:{x1:t.source.point.x+t.source.width/2,y1:t.source.point.y+t.source.height/2,x2:t.point.x,y2:t.point.y,stroke:"lightgray"}}),n("line",{attrs:{x1:t.point.x,y1:t.point.y,x2:t.destination.point.x+t.destination.width/2,y2:t.destination.point.y+t.destination.height/2,stroke:"lightgray"}}),n("ellipse",{staticClass:"grab",attrs:{id:t.id,cx:t.point.x,cy:t.point.y,rx:"10",ry:"10",fill:"#ff7675","stroke-width":"2"},on:{click:t.select,mousedown:t.mousedown,touchstart:t.mousedown,mousemove:t.mousemove,touchmove:t.mousemove,mouseup:t.mouseup,touchend:t.mouseup}})]):t._e(),n("g",[t.selected?n("text",{staticClass:"button",attrs:{x:t.point.x-15,y:t.point.y-20,fill:"#00b894"},on:{click:t.edit}},[t._v("\n      "+t._s(t.labels.edit||"Edit")+"\n    ")]):t._e(),t.selected?n("text",{staticClass:"button",attrs:{x:t.point.x-15,y:t.point.y+30,fill:"#ff7675"},on:{click:t.remove}},[t._v("\n      "+t._s(t.labels.remove||"Remove")+"\n    ")]):t._e()])])},y=[],x=(n("b54a"),{mixins:[f],props:{selected:Boolean,editable:Boolean,source:{id:Number,x:Number,y:Number},destination:{id:Number,x:Number,y:Number},link:{id:String,color:String,point:{x:Number,y:Number}},labels:Object,scale:String},data:function(){return{startPosition:null,cursorOffset:{x:0,y:0},id:this.link.id,point:this.link.point}},methods:{mousedown:function(t){var e=this.getLocation(t),n=d(e,2),i=n[0],o=n[1];this.cursorOffset.x=i,this.cursorOffset.y=o,this.startPosition={x:this.point.x,y:this.point.y},document.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup)},mousemove:function(t){if(this.startPosition){t.preventDefault();var e=this.getLocation(t),n=d(e,2),i=n[0],o=n[1];this.point.x=this.startPosition.x+(i-this.cursorOffset.x)/parseFloat(this.scale),this.point.y=this.startPosition.y+(o-this.cursorOffset.y)/parseFloat(this.scale),this.$emit("updateLocation",{id:this.id,x:this.point.x,y:this.point.y})}},mouseup:function(){this.startPosition=null,document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup)},remove:function(){this.$emit("remove",this.id)},select:function(){this.$emit("select",this.id)},edit:function(){this.$emit("editLink",{id:this.link.id,content:{color:this.link.color}})}}}),k=x,_=(n("daa4"),v(k,b,y,!1,null,"69935fbe",null));_.options.__file="Link.vue";var w=_.exports,L={name:"Diagram",props:{width:Number,height:Number,scale:{type:String,default:"1"},background:String,nodes:Array,links:Array,editable:Boolean,labels:Object},components:{Node:g,Link:w},computed:{scaleStr:function(){return"scale("+(this.scale||1)+")translate(0,0)"},nodeList:{get:function(){return this.nodes},set:function(t){this.$emit("nodeChanged",{nodes:t})}},linkList:{get:function(){return this.links},set:function(t){this.$emit("linkChanged",{links:t})}}},data:function(){return{name:"",url:"",color:"",selectedNode:-1,selectedLink:-1,createLinkMode:!1}},methods:{editNode:function(t){this.$emit("editNode",t)},editLink:function(t){this.$emit("editLink",t)},generateID:function(){return(new Date).getTime().toString(16)+Math.floor(1e6*Math.random()).toString(16)},addNode:function(){this.editable&&this.nodeList.push({id:this.generateID(),content:{text:this.name,color:this.color,url:this.url},width:200,height:60,point:{x:10,y:100+100*Math.random()}})},reset:function(){this.createLinkMode||(this.selectedNode=-1,this.selectedLink=-1)},updateLinkLocation:function(t){var e=this.linkList.find(function(e){return e.id===t.id});e.point.x=t.x,e.point.y=t.y},findNode:function(t){return this.nodes.find(function(e){return e.id===t})},removeLink:function(t){this.linkList=this.linkList.filter(function(e){return e.id!==t})},updateNodeLocation:function(t){var e=this.nodeList.find(function(e){return e.id===t.id});e.point.x=t.x,e.point.y=t.y},selectNode:function(t){this.selectedNode=t},selectLink:function(t){this.selectedLink=t},toggleSrcSelect:function(){this.createLinkMode=!this.createLinkMode},commitDest:function(t){var e=this,n=this.nodeList.find(function(t){return t.id===e.selectedNode}),i=this.nodeList.find(function(e){return e.id===t});this.linkList.push({id:this.generateID(),source:this.selectedNode,destination:t,point:{x:.5*(n.point.x+i.point.x),y:.5*(n.point.y+i.point.y)}}),this.createLinkMode=!1,this.selectedNode=-1},removeNode:function(t){var e=this.nodeList.filter(function(e){return e.id!==t});this.nodeList=e;var n=this.linkList.filter(function(e){return e.source!==t&&e.destination!==t});this.linkList=n}}},N=L,E=(n("0a01"),v(N,o,r,!1,null,null,null));E.options.__file="Diagram.vue";var S=E.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"editor"}},[t.editable?n("span",[n("VButton",{on:{click:t.openModal}},[t._v("New Node")]),n("VButton",{staticClass:"button",on:{click:t.endEdit}},[t._v("End")])],1):n("VButton",{staticClass:"button",on:{click:function(e){t.editable=!0}}},[t._v("Edit")]),n("VButton",{staticClass:"button",on:{click:t.openInputModal}},[t._v("import/export")]),n("VSelect",{model:{value:t.scale,callback:function(e){t.scale=e},expression:"scale"}},[n("option",{attrs:{value:"0.5"}},[t._v("Small")]),n("option",{attrs:{value:"1",selected:""}},[t._v("Medium")]),n("option",{attrs:{value:"2"}},[t._v("Large")])]),n("EditNodeModal",{attrs:{node:{content:{}},isActive:t.isModalActive},on:{ok:t.addNode,cancel:t.cancel}}),n("EditNodeModal",{attrs:{node:t.tmpNode,isActive:t.isEditModalActive},on:{ok:t.editNode,cancel:t.cancel}}),n("EditLinkModal",{attrs:{link:t.tmpLink,isActive:t.isEditLinkModalActive},on:{ok:t.editLink,cancel:t.cancel}}),n("InputModal",{attrs:{text:t.json,isActive:t.isInputModalActive},on:{ok:t.importData,cancel:t.cancel}}),n("Diagram",{attrs:{width:2e3,height:1e3,scale:t.scale,background:"#fafafa",nodes:t.graphData.nodes,links:t.graphData.links,editable:t.editable,labels:{edit:"Edit",remove:"Remove",link:"New Link",select:"Select"}},on:{editNode:t.openNodeEdit,editLink:t.openLinkEdit,nodeChanged:t.nodeChanged,linkChanged:t.linkChanged}})],1)},A=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VModal",{attrs:{isActive:t.isActive},on:{clickModal:t.cancel}},[n("transition",{attrs:{name:"item"}},[t.isActive?n("div",{staticClass:"form"},[n("VInput",{attrs:{placeholder:"name"},model:{value:t.newData.text,callback:function(e){t.$set(t.newData,"text",e)},expression:"newData.text"}}),n("br"),n("VInput",{attrs:{placeholder:"url"},model:{value:t.newData.url,callback:function(e){t.$set(t.newData,"url",e)},expression:"newData.url"}}),n("br"),n("VInput",{attrs:{placeholder:"color"},model:{value:t.newData.color,callback:function(e){t.$set(t.newData,"color",e)},expression:"newData.color"}}),n("br"),n("VSelect",{model:{value:t.newShape,callback:function(e){t.newShape=e},expression:"newShape"}},[n("option",{attrs:{value:"rectangle",selected:""}},[t._v("Rectangle")]),n("option",{attrs:{value:"ellipse"}},[t._v("Ellipse")])]),n("br"),n("VButton",{on:{click:t.ok}},[t._v("OK")]),n("VButton",{staticClass:"danger",on:{click:t.cancel}},[t._v("Cancel")])],1):t._e()])],1)},C=[],D={props:{isActive:Boolean,node:{type:Object,default:function(){return{id:"",shape:"rectangle",content:{text:"none",url:"",color:"#ecf0f1"}}}}},data:function(){return{newShape:this.node.shape,newData:this.node.content}},methods:{ok:function(){this.$emit("ok",{id:this.node.id,shape:this.newShape,content:this.newData})},cancel:function(){this.$emit("cancel")}}},I=D,j=(n("8d7e"),v(I,O,C,!1,null,"df61daa0",null));j.options.__file="EditNodeModal.vue";var $=j.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VModal",{attrs:{isActive:t.isActive},on:{clickModal:t.cancel}},[n("transition",{attrs:{name:"item"}},[t.isActive?n("div",{staticClass:"form"},[n("VInput",{attrs:{placeholder:"color"},model:{value:t.content.color,callback:function(e){t.$set(t.content,"color",e)},expression:"content.color"}}),n("br"),n("VButton",{on:{click:t.ok}},[t._v("OK")]),n("VButton",{staticClass:"danger",on:{click:t.cancel}},[t._v("Cancel")])],1):t._e()])],1)},V=[],F={props:{isActive:Boolean,link:{type:Object,default:function(){return{id:"0",content:{color:"#ecf0f1"}}}}},data:function(){return{content:this.link.content}},methods:{ok:function(){this.$emit("ok",{id:this.link.id,content:{color:this.content.color}})},cancel:function(){this.$emit("cancel")}}},B=F,T=(n("1c80"),v(B,P,V,!1,null,"798a2cd2",null));T.options.__file="EditLinkModal.vue";var R=T.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VModal",{attrs:{isActive:t.isActive},on:{clickModal:t.cancel}},[n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tmp,expression:"tmp"}],staticClass:"input",attrs:{required:"",placeholder:"JSON"},domProps:{value:t.tmp},on:{input:function(e){e.target.composing||(t.tmp=e.target.value)}}}),n("br"),n("VButton",{on:{click:t.ok}},[t._v("OK")]),n("VButton",{staticClass:"danger",on:{click:t.cancel}},[t._v("Cancel")])],1)])},X=[],G={props:{isActive:Boolean,text:String},watch:{text:function(t){this.tmp=t}},data:function(){return{tmp:""}},methods:{ok:function(){this.$emit("ok",{text:this.tmp})},cancel:function(){this.$emit("cancel")}}},z=G,J=(n("536c"),v(z,U,X,!1,null,"172f0f9c",null));J.options.__file="InputModal.vue";var K=J.exports,Y={name:"DiagramEditor",components:{Diagram:S,EditNodeModal:$,EditLinkModal:R,InputModal:K},props:{value:{type:Object,default:function(){return{nodes:[],links:[]}}}},computed:{graphData:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},data:function(){return{name:"",url:"",color:"",json:"",scale:"1",isModalActive:!1,isEditModalActive:!1,isEditLinkModalActive:!1,isInputModalActive:!1,editable:!1,tmpNode:{id:"",shape:"",content:{text:"",url:"",color:""}},tmpLink:{id:"",content:{color:""}}}},methods:{generateID:function(){return(new Date).getTime().toString(16)+Math.floor(1e6*Math.random()).toString(16)},openModal:function(){this.isModalActive=!0},cancel:function(){this.isModalActive=!1,this.isEditModalActive=!1,this.isEditLinkModalActive=!1,this.isInputModalActive=!1},addNode:function(t){this.graphData.nodes.push({id:this.generateID(),content:{text:t.content.text,url:t.content.url,color:t.content.color},width:150,height:60,shape:t.shape,point:{x:10,y:100+100*Math.random()}}),this.isModalActive=!1},openNodeEdit:function(t){this.tmpNode.id=t.id,this.tmpNode.content.text=t.content.text,this.tmpNode.content.url=t.content.url,this.tmpNode.content.color=t.content.color,this.tmpNode.shape=t.shape,this.isModalActive=!1,this.isEditModalActive=!0},editNode:function(t){var e=this.graphData.nodes.find(function(e){return e.id===t.id});e.content.text=t.content.text,e.content.url=t.content.url,e.content.color=t.content.color,e.shape=t.shape,this.isEditModalActive=!1},openLinkEdit:function(t){this.tmpLink.id=t.id,this.tmpLink.content.color=t.content.color,this.isEditLinkModalActive=!0},editLink:function(t){var e=this.graphData.links.find(function(e){return e.id===t.id});e.color=t.content.color,this.isEditLinkModalActive=!1},endEdit:function(){this.editable=!1},nodeChanged:function(t){this.graphData.nodes=t.nodes},linkChanged:function(t){this.graphData.links=t.links},openInputModal:function(){this.isInputModalActive=!0,this.json=JSON.stringify(this.graphData)},importData:function(t){var e=JSON.parse(t.text);e&&(this.graphData.nodes=e.nodes,this.graphData.links=e.links,this.isInputModalActive=!1)}}},q=Y,W=v(q,M,A,!1,null,null,null);W.options.__file="DiagramEditor.vue";var Q=W.exports,H=S;n.d(e,"Diagram",function(){return S}),n.d(e,"DiagramEditor",function(){return Q});e["default"]=H},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}})});
//# sourceMappingURL=diagram.umd.min.js.map